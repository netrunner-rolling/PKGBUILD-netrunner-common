# $Id$
# Maintainer: James Kittsmiller (AJSlye) <james@nulogicsystems.com>

pkgname=netrunner-settings-theming
pkgver=$(date +%Y.%m)
pkgrel=6
pkgdesc="Default theming settings"
arch=('any')
url='https://github.com/netrunner-common/netrunner-settings-theming'
license=('GPL')
groups=('netrunner-common')
makedepends=('git')
source=('git://github.com/netrunner-common/netrunner-settings-theming' 'Trolltech.conf' 'kcminputrc' 'plasmarc' '.imwheelrc')
md5sums=('SKIP' 'SKIP' 'SKIP' 'SKIP' 'SKIP')

prepare() {
  cd $srcdir/$pkgname
  sed -i '/KDE]/a\LookAndFeelPackage=org.kde.netrunner-rolling.desktop' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -i '/KDE]/a\WheelScrollLines=2' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -e 's|^ShadowSize=.*|ShadowSize=28|' -i usr/share/default-settings/plasma5-profile/breezerc
  sed -e 's|^ShadowStrength=.*|ShadowStrength=51|' -i usr/share/default-settings/plasma5-profile/breezerc
  sed -e 's|^AnimationSpeed=.*|AnimationSpeed=1|' -i usr/share/default-settings/plasma5-profile/kwinrc
  sed -e 's|^blurEnabled=.*|blurEnabled=true|' -i usr/share/default-settings/plasma5-profile/kwinrc
  sed -e 's|^BorderSize=None|BorderSize=NoSides|' -i usr/share/default-settings/plasma5-profile/kwinrc
  sed -i '/CommandWindowWheel=Scroll/a\[Effect-Blur]' usr/share/default-settings/plasma5-profile/kwinrc
  sed -i '/CommandWindowWheel=Scroll/a\\' usr/share/default-settings/plasma5-profile/kwinrc
  sed -i '/Effect-Blur]/a\BlurStrength=3' usr/share/default-settings/plasma5-profile/kwinrc
  sed -i '/Effect-Blur]/a\NoiseStrength=14' usr/share/default-settings/plasma5-profile/kwinrc
  sed -e 's|^contrastEnabled=false|contrastEnabled=true|' -i usr/share/default-settings/plasma5-profile/kwinrc

  mv etc/gtk-2.0/gtkrc etc/skel/.gtkrc-2.0
  mv etc/gtk-3.0 etc/skel/.config/
  rm -r etc/gtk-2.0
}

package() {
  cd $srcdir/$pkgname
  cp -aR etc $pkgdir/
  cp -aR usr $pkgdir/
   
# Install modifications for Arch/Manjaro base
  install -Dm644 "${srcdir}"/Trolltech.conf "${pkgdir}"/etc/skel/.config/Trolltech.conf
  install -Dm644 "${srcdir}"/kcminputrc "${pkgdir}"/usr/share/default-settings/plasma5-profile/kcminputrc
  install -Dm644 "${srcdir}"/plasmarc "${pkgdir}"/usr/share/default-settings/plasma5-profile/plasmarc
  install -Dm644 "${srcdir}"/.imwheelrc "${pkgdir}"/etc/skel/.imwheelrc

}
