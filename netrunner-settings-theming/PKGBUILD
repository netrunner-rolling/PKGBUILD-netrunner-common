# $Id$
# Maintainer: James Kittsmiller (AJSlye) <james@nulogicsystems.com>

pkgname=netrunner-settings-theming
pkgver=$(date +%Y.%m)
pkgrel=1
pkgdesc="Default theming settings"
arch=('any')
url='https://github.com/netrunner-common/netrunner-settings-theming'
license=('GPL')
groups=('netrunner-common')
makedepends=('git')
source=('git://github.com/netrunner-common/netrunner-settings-theming' 'Trolltech.conf')
md5sums=('SKIP' 'SKIP')

prepare() {
  cd $srcdir/$pkgname
  sed -i '/KDE]/a\LookAndFeelPackage=org.kde.netrunner-rolling.black' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -i '/KDE]/a\WheelScrollLines=2' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -i '153i[Icons]' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -i '/Icons]/a\Theme=Obsidian\n' usr/share/default-settings/plasma5-profile/kdeglobals
  sed -i '2a\\' usr/share/default-settings/plasma5-profile/plasmarc
  sed -i '3a[Theme]' usr/share/default-settings/plasma5-profile/plasmarc
  sed -i '/Theme]/a\name=breeze-alphablack' usr/share/default-settings/plasma5-profile/plasmarc
  sed -e 's|^ShadowSize=.*|ShadowSize=ShadowLarge|' -i usr/share/default-settings/plasma5-profile/breezerc
  sed -e 's|^ShadowStrength=.*|ShadowStrength=128|' -i usr/share/default-settings/plasma5-profile/breezerc
  sed -e 's|^library=.*|library=org.kde.kwin.aurorae|' -i usr/share/default-settings/plasma5-profile/kwinrc
  sed -i '/aurorae/a\theme=__aurorae__svg__FormaN' usr/share/default-settings/plasma5-profile/kwinrc
}

package() {
  cd $srcdir/$pkgname
  cp -aR etc $pkgdir/
  cp -aR usr $pkgdir/
   
# Install modifications for Arch/Manjaro base
  install -Dm644 "${srcdir}"/Trolltech.conf "${pkgdir}"/etc/skel/.config/Trolltech.conf
}
